"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5713],{95289:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(67294),r=a(94184),l=a.n(r),o=a(28760),i=a(62312),s=a(41374),c=a(20246),u=a(58238),m=a(91883),d=a(30005),g=a(36652),y=a(21691),p=a(28248);const E=({heading:e,selected:t,onSelect:a,options:r,sortOrder:l})=>{let i;return l&&(l===p.kn.ASC||l===p.kn.SECONDARY_ASC?i=n.createElement(u.C,{iconSize:16}):l!==p.kn.DESC&&l!==p.kn.SECONDARY_DESC||(i=n.createElement(m.B,{iconSize:16}))),n.createElement(d.v,null,e?n.createElement(g.F,null,e):null,r.map((({key:e,value:r})=>n.createElement(y.s,{role:"menuitemradio","aria-checked":e===t.key&&!i,key:e,onClick:()=>a(e),icon:e===t.key&&i},n.createElement(o.Dy,{variant:"mesto"},r)))))},v="x-sortBox-sortDropdown",b="CbHJjxYxldG7uUPMYMaP";const f=({heading:e,options:t,selected:a,onSelect:r,isSelectionChanged:u,sortOrder:m,variant:d="mesto",semanticColor:g,disabled:y})=>{const[p]=t;a||(a=p);const f=u?u(a):a!==p;return n.createElement(c.y,{menu:n.createElement(E,{selected:a,options:t,onSelect:r,sortOrder:m,heading:e})},((e,t,r)=>n.createElement("button",{className:l()(v,{[b]:f}),onClick:e=>{y||t(e)},ref:r,type:"button"},n.createElement(o.Dy,{semanticColor:g,variant:d},a.value),e?n.createElement(i.U,{iconSize:16}):n.createElement(s.i,{iconSize:16}))))}},47917:(e,t,a)=>{a.d(t,{V:()=>U,e:()=>R});var n=a(59713),r=a.n(n),l=a(67294),o=a(46458),i=a(69518),s=a.n(i),c=a(33702),u=a(84629),m=a(43914),d=a(25988),g=a(68556),y=a(95806),p=a(99191),E=a(56802),v=a(38894),b=a(80219),f=a(18261),k=a(62975),h=a(87257),C=a(57978),P=a(75016),S=a(42922),w=a(18864),N=a(52759),O=a(1496),A=a(7073),D=a(84788);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const j=e=>`activation-trigger-mme-${e}`,U=l.memo((({index:e,showMetadata:t,episode:a,usePlayContextItem:n})=>{var r,i,I,U,L,z,M,B;const T=null===(r=(0,o.oR)().getState().platform)||void 0===r?void 0:r.isBrowser,F=a.playedState.playPositionMilliseconds,G=a.uri,_=(0,l.useRef)(null),[X,Y]=(0,l.useState)(a.playedState.state===A.sY.Completed),W=(0,p.O1)(),H=(0,v.g)(),q=(0,w.jh)(),K=(0,E.o)(),V=(0,o.I0)(),{UBIFragment:Z,spec:Q,logger:J}=(0,O.fU)(c.createDesktopEpisodeBlockEventFactory,{data:{uri:G,reason:a.requestId||"",position:e}}),$=(0,O.Wi)(Q),{isActive:ee,isPlaying:te,togglePlay:ae}=n({uri:G}),[ne]=(0,N.z)(1e4,(e=>{var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===G}));(0,l.useEffect)((()=>{te&&(_.current=ne)}),[te,ne]),(0,l.useEffect)((()=>{!te&&_.current&&a.duration.milliseconds<=_.current&&Y(!0)}),[te,a.duration.milliseconds]);const re=(0,l.useCallback)((e=>{e||(_.current=0),Y(e)}),[]),le=R(t),oe=(0,b.s)(x(x({},a),{},{coverArt:{sources:a.coverArt}}),le),ie=(0,l.useCallback)((()=>{if(a.episodeType===A.Wf.Episode&&T)k.y.set((()=>({triggerId:j(a.uri),triggerAction:null})));else if(H)oe();else{let e;e=te?Q.playButtonFactory().hitPause({itemToBePaused:G}):ee?Q.playButtonFactory().hitResume({itemToBeResumed:G}):Q.playButtonFactory().hitPlay({itemToBePlayed:G});const t=J.logInteraction(e);K({targetUri:G,intent:te?"pause":"play",type:"click"}),ae({loggingParams:t})}}),[ee,oe,K,ae,G,te,H,a,T,J,Q]),se=(0,l.useCallback)((()=>{J.logInteraction(Q.hitUiNavigate({destination:G})),K({type:"click",targetUri:G,intent:"navigate"})}),[G,K,J,Q]),ce=null!==(i=null===(I=a.podcastSubscription)||void 0===I?void 0:I.isPaywalled)&&void 0!==i&&i,ue=null!==(U=null===(L=a.podcastSubscription)||void 0===L?void 0:L.isUserSubscribed)&&void 0!==U&&U,me=ce&&!ue,de=ce&&H,{badges:ge}=(0,D.r)({contentRating:null===(z=a.contentRating)||void 0===z?void 0:z.label,isPaywalled:ce}),ye=(0,l.useCallback)((()=>V((0,u.RM)(t.uri))),[t.uri,V]),pe=(0,l.useCallback)((e=>{let n=e;return(me||de)&&(n=l.createElement(y.l,{enabled:!0,showUri:t.uri},n)),!a.playability.playable&&ge.nineteen&&(n=l.createElement("div",{onClick:e=>{e.stopPropagation(),ye()}},e)),n=l.createElement(m.D,{id:j(G),targetURI:s().from(G)},n),n}),[G,me,de,t.uri,ge.nineteen,a.playability.playable,ye]);return l.createElement(Z,{spec:Q},l.createElement(S.ZP,{value:"row",index:e},l.createElement(f._,{onShow:()=>{J.logInteraction(Q.secondaryHitUiReveal())},menu:l.createElement(d.k,{uri:G,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:X,onMarkAsPlayed:re})},l.createElement(g.X,{ref:$,requestId:a.requestId,index:e,uri:G,size:q,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||me,fullyPlayed:X,durationMs:a.duration.milliseconds,releaseDate:(null===(M=a.releaseDate)||void 0===M?void 0:M.isoString)||"",resumePositionMs:null!==(B=_.current)&&void 0!==B?B:F,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const n=`${a.name} • ${t.name}`;W(e,[G],n,t.uri)},handlePlaybackClick:ie,handleClick:se,isCurrentlyPlaying:ee,isPaywalled:ce,isUserSubscribed:ue,isPlaying:te,position:te?ne:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:re,contentInformation:a.contentInformation,badges:l.createElement(l.Fragment,null,ge.explicit&&l.createElement(h.N,null),ge.paid&&l.createElement(P.g,null),ge.nineteen&&l.createElement(C.X,{size:16})),playButtonWrapper:pe,onMoreButtonClick:()=>{J.logInteraction(Q.moreButtonFactory().hitUiReveal())}}))))}))},13014:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ta});var n=a(67294),r=a(52883),l=a(87577),o=a(20657),i=a(70369),s=a(1663),c=a(28760),u=a(73012),m=a(59713),d=a.n(m),g=a(728),y=a(56802),p=a(25678),E=a(49961),v=a(85105);const b="GPPWAsVio35hH080drEK",f="f8FyVnjsXfG9VtTzk9Df",k="tpOdce3HYBF6ASz4MXdr",h="p9AillvR7MCZkOrv3U3h",C="zMqHdOQtjEEbcMV7YHe9",P="zPJ5qeQhpgUvKpAAlNpA",S="n3G4Y43jgF6wXOuj0X44";function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const O=n.memo((({coverArt:e,showAccessInfo:t,isOpen:a,toggleModal:l,backgroundColor:o})=>{const i=(0,r.k6)(),s=(0,y.o)();if((0,n.useEffect)((()=>{s({type:"view",intent:"audiobook-gated-entry-point"})}),[s]),!t||!t.partnerLink)return null;const{partnerLink:{title:u,body:m,soaPartners:d}}=t,w=(0,E.X)(e,{desiredSize:640}),O={"--bg-color":o};return n.createElement(v.Z,{contentLabel:"activation-modal",isOpen:a,onRequestClose:l},n.createElement("div",{className:b,style:N({},O)},n.createElement(p.Ee,{loading:"lazy",src:null==w?void 0:w.url,className:f}),n.createElement("div",{className:k},n.createElement(c.Dy,{as:"p",variant:"canon",className:h},u),n.createElement(c.Dy,{as:"p",className:C},m),d&&(null==d?void 0:d.map((e=>n.createElement("a",{href:e.linkUrl,className:P,key:e.linkUrl,onClick:()=>{s({type:"click",intent:"navigate-to-access-provider",itemIdSuffix:e.displayName}),l(),i.replace("?isUnlockingAudiobook=true")}},n.createElement("img",{src:e.logoUrl||"",alt:"",width:"24px"}),n.createElement("span",{className:S},n.createElement(c.Dy,{variant:"ballad"},e.displayName," ")),n.createElement(g.V,{iconSize:16}))))))))}));var A=a(95661),D=a(22345),I=a(20246),x=a(44887),R=a(7469),j=a(42781);const U={container:"SpVoh9vvBN0kIwzfCiBh",isActive:"nsGHaEmn310z9W4RMbb8",title:"PfYVlZzroXSurDmS_kxY",main:"kCT99_BcJQtW47mEfVF6",titleContainer:"gmDgEbPyRXNixmjYAT9f",duration:"itbbweiDUhLIrwEjSRWv",trailerContainer:"XlZGcb86bItwlMPQ2jOf",image:"VGTtqfOlX2jIbpff6mPP",imageContainer:"aexqooSgfdW95poEaxjH",playButton:"Fui2wGupk4F1Khigbrhj",entityImageLarge:"jWcvSz47NFpbLjnkFT1O",entityImageSmall:"Oo6MP8F01W5uGlnw8dag"};var L=a(55911),z=a(94184),M=a.n(z),B=a(33985),T=a(87257),F=a(57978),G=a(95775),_=a(84788),X=a(85592);let Y;!function(e){e.SMALL="small",e.LARGE="large"}(Y||(Y={}));const W=({images:e,title:t,contentRating:a,duration:r,moreButton:l,onClick:o,onContextMenu:i,onTouchStart:s,onTouchEnd:u,isPlaying:m,isActive:d,size:g,className:y,label:p})=>{const E=g===Y.LARGE?"md":"sm",{badges:v}=(0,_.r)({contentRating:a});return n.createElement("div",{"data-testid":"trailer-component",className:M()(U.container,y,{[U.isActive]:d}),onContextMenu:i,onTouchStart:s,onTouchEnd:u},n.createElement("div",{className:U.main},n.createElement("div",{className:U.imageContainer},n.createElement(x.O,{type:j.p.EPISODE,title:t,className:M()(U.image,{[U.entityImageSmall]:g===Y.SMALL,[U.entityImageLarge]:g===Y.LARGE}),size:R.m$.SIZE_56,images:e,shape:x.K.ROUNDED_CORNERS}),n.createElement("div",{className:U.playButton},n.createElement(X.fh,{"data-testid":"trailer-play-button",version:L.ul.transparent,size:E,isPlaying:m,onClick:o}))),n.createElement("div",{className:U.metadata},n.createElement("div",{className:U.titleContainer},n.createElement(c.Dy,{dir:"auto",className:U.title,variant:"balladBold"},t)),n.createElement("div",{className:U.trailerContainer},n.createElement(G.V,{text:p}),v.explicit&&n.createElement(T.N,null),v.nineteen&&n.createElement(F.X,null),n.createElement(c.Dy,{dir:"auto",variant:"mesto"},n.createElement(B.nL,{durationMs:r}))))),l)};var H=a(40080),q=a(43620),K=a(84242),V=a(27999),Z=a(86649),Q=a(60410),J=a(88767),$=a(192);var ee=a(77868),te=a(89116),ae=a(96685);const ne="FDo1c930TY7w1jdlAT_K",re="g0wYcqQLhTR49i3Dg8fR",le="JufUKEPxfyC713XB_e1g",oe=({rating:e})=>{var t,a;if(!e)return null;const r=null!=e&&null!==(t=e.rating)&&void 0!==t&&t.rating?ee.u:te.G,l=null!==(a=e.averageRating)&&void 0!==a&&a.showAverage?n.createElement(ae.LF,{variant:"mesto",className:M()(le)},"(",o.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"):null;return n.createElement("div",{className:M()(ne)},n.createElement(ae.LF,{dir:"auto",variant:"mestoBold"},null!=e&&null!==(i=e.averageRating)&&void 0!==i&&i.showAverage&&null!==(s=e.averageRating)&&void 0!==s&&s.average?null===(u=e.averageRating)||void 0===u?void 0:u.average:null!=e&&null!==(c=e.rating)&&void 0!==c&&c.rating?e.rating.rating:o.ag.get("web-player.audiobooks.noRating")),n.createElement(r,{iconSize:16,className:M()(re)}),l);var i,s,c,u};var ie=a(20238),se=a(67892);const ce="nLNTsyonBwoRIzAv1AME",ue="E4I5I7G2CfW32hLWZaqE",me=({title:e,uri:t,className:a})=>n.createElement(se.r,{"aria-label":e,className:M()(ue,a),to:t},n.createElement(c.Dy,{dir:"auto",variant:"mestoBold"},e));function de(e){return!!e.uri&&!!e.title}const ge=({topics:e,className:t})=>n.createElement("div",{className:M()(ce,t)},e.filter(de).map((e=>n.createElement(me,{key:e.uri,title:e.title,uri:e.uri})))),ye={sectionTitle:"igKG5CnS4gyhXQWp5GVu",author:"E8g_EyijtSREXL0vMFbL",narrator:"Pc8AKn4KmzHwEw8lPiSb",topics:"yE1clVJOE3LrEuOvUxxq"},pe=({authorName:e,htmlDescription:t,narrators:a,rating:r})=>{const l=(0,y.o)(),i=(0,n.useCallback)((()=>{l({intent:"expand-description",type:"click"})}),[l]),s=[{title:"Education",uri:"spotify:genre:educational_podcasts"}],u=s.length>0;return n.createElement(n.Fragment,null,n.createElement(c.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:ye.sectionTitle},o.ag.get("artist.about")),n.createElement(c.Dy,{as:"p",variant:"ballad",className:ye.author},o.ag.get("web-player.audiobooks.author",e)),a.length?n.createElement(c.Dy,{as:"p",variant:"ballad",className:ye.narrator},o.ag.get("web-player.audiobooks.narratedByX",a.join(o.ag.getSeparator()))):null,n.createElement(oe,{rating:r}),u&&n.createElement(ge,{topics:s,className:ye.topics}),t&&n.createElement(ie.o,{maxLines:4,content:t,htmlContent:t,LinkComponent:se.Z,onExpanded:i,className:ye.description}))};var Ee=a(30947),ve=a(14535),be=a(4383),fe=a(98778),ke=a(55120),he=a(4236);const Ce=n.memo((({backgroundColor:e,uri:t,isPlaying:a,togglePlay:r,isLocked:l})=>{const[i,s]=(0,be.Z)(t),c=!(0,he.k)(),u=(0,y.o)(),m=(0,n.useCallback)((()=>{u({targetUri:t,intent:i?"unsave":"save",type:"click"}),s(!i)}),[u,t,i,s]);return n.createElement(Ee.o,{backgroundColor:e},n.createElement(Ee.F,null,n.createElement(ke.$,{onClick:()=>r(),isPlaying:a,size:L.qE.lg,uri:t,locked:l}),n.createElement(fe.r,{key:"follow-button"},n.createElement(ve.e,{isFollowing:i,onClick:m,disabled:c,buttonText:i?o.ag.get("saved"):o.ag.get("save")}))))}));var Pe=a(32626),Se=a(28137),we=a(42273),Ne=a(59482),Oe=a(72907);const Ae=n.memo((({coverArt:e,name:t,authorName:a,uri:r,backgroundColor:l,isPlaying:i,togglePlay:s,isLocked:c})=>n.createElement(we.gF,{backgroundColor:l},n.createElement(Ne.W,null,n.createElement(ke.$,{size:L.qE.sm,onClick:()=>s(),isPlaying:i,uri:r,locked:c}),n.createElement(Oe.i,{text:t,dragUri:r,dragLabel:t})),n.createElement(Pe._P,{menu:n.createElement(Se.X,{uri:r})},n.createElement(we.Oz,{images:e,name:t,shape:x.K.ROUNDED_CORNERS})),n.createElement(we.sP,null,n.createElement(we.dy,{small:!0,uppercase:!0},o.ag.get("web-player.audiobooks.audiobook")),n.createElement(we.xd,{canEdit:!1,onClick:()=>{}},t),n.createElement(we.QS,{author:a})))));var De=a(69518),Ie=a.n(De),xe=a(75016),Re=a(26010),je=a(69010),Ue=a(8341),Le=a(5944),ze=a(92408),Me=a(31610);const Be="BO8KtKFwgSHtMt6PAmuv",Te="b0Vng72SrQiFroJKXfk2",Fe="eWxDd0LanTnTlSl8SOHX",Ge="eAOkseqV13_CAmzuDJpa",_e="fovofKIYdEIURgIYoKm2",Xe="we_1b4qCQBaFPT12eUXp",Ye="NXXFrQO7npgPCRuSKaAA",We="ekkhhuxKVGAzkEmuh9kE",He="zd6xqobF255bxHFtCmXy",qe=n.memo((({name:e,duration:t,uri:a,bookUri:l,bookName:i,usePlayContextItem:s,isLocked:u,isPlayable:m,resumePositionMs:d,isFullyPlayed:g,releaseDate:p,toggleActivationModal:E})=>{const v=(0,r.k6)(),b=Ie().from(a).toURLPath(!0),[f,k]=(0,n.useState)(g),h=(0,n.useRef)(d),{isPlaying:C,togglePlay:P}=s({uri:a}),S=(0,Ue.Y)((e=>{var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===a){var n;const t=null!==(n=(0,Le.k)(e))&&void 0!==n?n:0;return h.current=t,t}return 0})),{useDownloading:w}=(0,n.useContext)(Re.I),{currentAvailability:N}=w(a),O=[je.V8.YES,je.V8.DOWNLOADING,je.V8.WAITING].includes(N),I=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),x=(0,n.useCallback)((e=>{I(e),b&&v.push(b)}),[I,b,v]),R=(0,y.o)(),j=(0,n.useCallback)((e=>{I(e),u?(R({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),E()):P()}),[u,R,I,E,P]),U=(0,n.useCallback)((e=>{e||(h.current=0),k(e)}),[]);return n.createElement(Pe._P,{menu:n.createElement(D.r,{uri:a,showUri:l,isPlayed:f,onMarkAsPlayed:U})},n.createElement("div",{className:Ge},n.createElement(se.r,{to:a,onClick:x,className:Be,tabIndex:-1},n.createElement("hr",{className:Fe,"aria-hidden":!0}),n.createElement("div",{className:Te},n.createElement(c.Dy,{as:"h2",variant:"balladBold",className:Ye,semanticColor:"textBase"},e),n.createElement("div",{className:We},n.createElement(X.fh,{size:"sm",version:X.ul.secondary,onClick:j,isPlaying:C,ariaPlayLabel:o.ag.get("tracklist.a11y.play",e,i),ariaPauseLabel:o.ag.get("tracklist.a11y.pause",e,i),locked:u,disabled:!m&&!u}),u?n.createElement(xe.g,null):null,n.createElement("div",{className:He},n.createElement(ze.E,{isPlaying:C,fullyPlayed:f,durationMs:t.milliseconds,releaseDate:p,resumePositionMs:h.current,position:C?S:void 0}))),n.createElement(Pe.yj,{menu:n.createElement(D.r,{uri:a,showUri:l,isPlayed:f,onMarkAsPlayed:U})},n.createElement(A.z,{className:_e,size:Me.q.sm,label:o.ag.get("more.label.context",e),onClick:I})),n.createElement(Me.o,{uri:a,bookUri:l,className:M()({[Xe]:!O}),onClick:I,size:Me.q.sm})))))})),Ke="mmCZ5VczybT9VqKB5wFU",Ve="At_ihDspJfh1yw3Cn2cq",Ze="q9WSh3pBJkL9Zyp8zyS7",Qe="eiC4nh70nb5UHZBYMgNA",Je="uU7tdAyRmWf_U95Daugm",$e=n.memo((({metadata:e})=>{var t,a;const{uri:l,coverArt:i,name:s,htmlDescription:m,authorName:d,sample:g,narrators:p,rating:E}=e,{search:v}=(0,r.TH)(),b=!!new URLSearchParams(v).get("isUnlockingAudiobook"),f=!(!(0,H.D)(b)||b),k=(0,q.Z)(null===(t=i[0])||void 0===t?void 0:t.url),h=function(e,t){const a=(0,$.z)(),{data:n}=(0,J.useQuery)(["useGetBookContents",e,t],(()=>a.getBookContents(e,t)),{cacheTime:3e5});return null!=n?n:null}(l,f),[C,P]=(0,n.useState)(!1),S=(0,y.o)();(0,n.useEffect)((()=>{S({type:"view",intent:"audiobook"})}),[S]);const w=(0,n.useCallback)((()=>{C||S({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-header"}),P(!C)}),[S,C]),N=(0,V.ye)(l),{togglePlay:x,isPlaying:R,usePlayContextItem:j}=(0,K.n)({uri:l},{featureIdentifier:"audiobook"}),{isActive:U,isPlaying:L,togglePlay:z}=j({uri:(null==g?void 0:g.uri)||""}),M=(0,n.useCallback)((()=>{null!=g&&g.uri&&(S({targetUri:g.uri,intent:L?"play":"pause",type:"click"}),z())}),[L,S,z,null==g?void 0:g.uri]),B=(0,Q.g)(h);return n.createElement("section",{className:Ke},n.createElement(Ae,{name:s,authorName:d,uri:l,coverArt:i,backgroundColor:k,togglePlay:B?w:x,isPlaying:R,isLocked:B}),n.createElement(Ce,{backgroundColor:k,uri:l,togglePlay:B?w:x,isPlaying:R,isLocked:B}),n.createElement("div",{className:Ve},n.createElement("div",{className:Qe},n.createElement(c.Dy,{as:"h1",variant:"canon",semanticColor:"textBase",paddingBottom:u.o78},o.ag.get("web-player.audiobooks.chapters")),n.createElement("ul",null,h&&h.map((e=>{const{name:t,duration:a,uri:r,playability:{playable:o},playedState:{playPositionMilliseconds:i,state:c},releaseDate:u}=e;return n.createElement(qe,{name:t,duration:a,uri:r,bookUri:l,bookName:s,key:r,usePlayContextItem:j,isLocked:(0,Q.S)(e),isPlayable:o,resumePositionMs:i,isFullyPlayed:c===Z.sY.Completed,releaseDate:(null==u?void 0:u.isoString)||"",toggleActivationModal:w})})))),n.createElement("div",{className:Ze},n.createElement(pe,{htmlDescription:m,authorName:d,narrators:p,rating:E}),g&&n.createElement(W,{label:o.ag.get("sample"),className:Je,images:g.coverArt||[],title:g.name,duration:g.duration.milliseconds,moreButton:n.createElement(I.y,{menu:n.createElement(D.r,{uri:g.uri,showUri:l})},n.createElement(A.z,null)),onClick:M,isPlaying:L,isActive:U,size:Y.LARGE,contentRating:null===(a=g.contentRating)||void 0===a?void 0:a.label}))),C&&N&&n.createElement(O,{backgroundColor:k,isOpen:C,toggleModal:w,coverArt:i,showAccessInfo:N}))}));var et=a(49207),tt=a(49125),at=a(26382);const nt={field:at.ay.PUBLISH_DATE,order:at.i5.DESC},rt={field:at.ay.PUBLISH_DATE,order:at.i5.ASC},lt={field:at.ay.LENGTH,order:at.i5.DESC},ot={field:at.ay.LENGTH,order:at.i5.ASC},it={episodic:nt,sequential:rt,recent:nt};function st(e){return it[e]}var ct=a(86514);const ut=({uri:e,name:t,backgroundColor:a})=>{const r=(0,y.o)(),l=!(0,he.k)(),[i,s]=(0,be.Z)(e),c=(0,n.useCallback)((()=>{r({targetUri:e,intent:i?"unsave":"save",type:"click"}),s(!i)}),[r,e,i,s]);return n.createElement(Ee.o,{backgroundColor:a},n.createElement(Ee.F,null,n.createElement(fe.r,{key:"follow-button"},n.createElement(ve.e,{isFollowing:i,onClick:c,disabled:l})),n.createElement(I.y,{menu:n.createElement(ct.M,{uri:e})},n.createElement(A.z,{label:o.ag.get("more.label.context",t)}))))},mt=(0,n.lazy)((()=>a.e(8381).then(a.bind(a,18381))));function dt(e){return(0,l.W6)(et.$f)?n.createElement(n.Suspense,{fallback:!0},n.createElement(mt,e)):null}var gt=a(25988),yt=a(38894),pt=a(80219),Et=a(18261),vt=a(94233),bt=a(89952),ft=a(47917),kt=a(33241),ht=a(42922),Ct=a(18864),Pt=a(22583);const St=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),wt=n.memo((function({uri:e,children:t}){return n.createElement(Pt.r,{uri:e,defaultState:[],sortContext:St,localStorageKey:"showFilterParams-v2"},t)})),Nt=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:st("recent")}),Ot=n.memo((function({uri:e,children:t,defaultSortParam:a}){return n.createElement(Pt.r,{uri:e,defaultState:a,sortContext:Nt,localStorageKey:"showSortParam"},t)})),At="cJJXVm4gQW6AdfCQRhpX",Dt="hTRqaN61SDG95erQGMmx";function It(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?It(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):It(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const Rt={totalCount:0,nextOffset:0,items:[]},jt=n.memo((({showMetadata:e,usePlayContextItem:t})=>{const{sortState:a}=(0,n.useContext)(Nt),{sortState:r}=(0,n.useContext)(St),l=(0,V.ZM)(e.uri,a,r),[o,i]=(0,n.useState)(Rt),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),{ref:u,breakpoint:m}=(0,Ct.Db)({[Ct.Uo.MEDIUM]:0,[Ct.Uo.LARGE]:600}),d=(0,n.useCallback)(((e=!1)=>{if(!l)return;const t=c.current;null!==t&&(s.current||(s.current=!0,l(t,50).then((a=>{i((n=>{const r=e?[]:[...n.items];return r.splice(t,a.items.length,...a.items),c.current=a.nextOffset,xt(xt({},a),{},{items:r})})),s.current=!1}))))}),[l]);return(0,n.useEffect)((()=>{i(Rt)}),[e.uri]),(0,n.useEffect)((()=>{c.current=0,d(!0)}),[d]),n.createElement(Ct.ZU.Provider,{value:m},n.createElement(ht.ZP,{value:"track-list"},n.createElement("div",{ref:u},n.createElement(kt.C,{onReachBottom:d,triggerOnInitialLoad:!0},o.items.map(((a,r)=>n.createElement("div",{className:Dt,key:`${r}${a.uri}`},n.createElement("hr",{className:At,"aria-hidden":!0}),n.createElement(ft.V,{key:`${a.uri}/${r}`,index:r,episode:a,showMetadata:e,usePlayContextItem:t}))))))))}));var Ut=a(95289);const Lt={field:at.YG.ISPLAYED,operator:at.NK.EQUALS,value:!1},zt={field:at.YG.STARTEDPLAYING,operator:at.NK.GREATER_THAN,value:0};const Mt="all-episodes",Bt=()=>{const{sortState:e,setSortState:t}=(0,n.useContext)(St),a=new Map([[Lt,{key:"is-played",value:o.ag.get("shows.filter.unplayed")}],[zt,{key:"started-playing",value:o.ag.get("shows.filter.in-progress")}]]),r=Array.from(a.values());r.unshift({key:Mt,value:o.ag.get("mwp.podcast.all.episodes")});const l=Array.from(a.keys()),i=(0,n.useCallback)((e=>{if(e===Mt)t([]);else{const n=l.find((t=>{var n;return(null===(n=a.get(t))||void 0===n?void 0:n.key)===e}));n&&t([n])}}),[t,l,a]);if(!a.size||!l)return null;let s=r[0];const c=Array.from(a.entries()).filter((t=>null==e?void 0:e.some((e=>e.field===t[0].field&&e.operator===t[0].operator))));return c.length>0&&(s=c[0][1]),n.createElement(Ut.A,{options:r,onSelect:e=>i(e),selected:s,variant:"balladBold",semanticColor:"textBase",heading:o.ag.get("drop_down.filter_by")})},Tt=()=>{const{sortState:e,setSortState:t}=(0,n.useContext)(Nt),a=new Map([[nt,{key:"newest-to-oldest",value:o.ag.get("shows.sort.newest-to-oldest")}],[rt,{key:"oldest-to-newest",value:o.ag.get("shows.sort.oldest-to-newest")}],[lt,{key:"longest-to-shortest",value:o.ag.get("shows.sort.longest-to-shortest")}],[ot,{key:"shortest-to-longest",value:o.ag.get("shows.sort.shortest-to-longest")}]]),r=Array.from(a.values()),l=Array.from(a.keys()),i=(0,n.useCallback)((e=>{const n=l.find((t=>{var n;return(null===(n=a.get(t))||void 0===n?void 0:n.key)===e}));n&&t(n)}),[l,a,t]);if(!a.size||!e)return null;const s=Array.from(a.keys()).find((t=>t.field===e.field&&t.order===e.order)),c=a.get(s);return n.createElement(Ut.A,{options:r,onSelect:e=>i(e),selected:c,heading:o.ag.get("drop_down.sort_by")})},Ft="aQMtxnKeiJqZ9XCcDuZ7",Gt="TYB4Y2xQujO7cifhHush",_t="YJlizbhw6DBPHT9OYbdj",Xt="klz_XuZpllvTMzpJF1gw",Yt="TfjbWiK8hca4HHEBnonP",Wt="kR0M2WSYVUj4cohADSFM",Ht="ghfuv80I8uW_ymG_jfx9",qt="jtfSxoRam9rzTtdXIjzc",Kt="fejGrhq7pxGC99cUdyVw",Vt="T0OjvsNXAJJGd23eBG2m",Zt=()=>{const{canSort:e,canFilter:t}=(0,V.zZ)().capabilities;return n.createElement("div",{className:Wt},t&&n.createElement("div",{className:qt},n.createElement(Bt,null)),!t&&n.createElement(c.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:Kt},o.ag.get("mwp.podcast.all.episodes")),e&&n.createElement("div",{className:Ht},n.createElement(Tt,null)))},Qt=({metadata:e,showId:t})=>{var a;const{uri:r,trailer:i,topics:s,description:u,htmlDescription:m}=e,d=(0,y.o)(),g=(0,l.W6)(et.Cz),p=(0,yt.g)(),{sortState:E}=(0,n.useContext)(Nt),{sortState:v}=(0,n.useContext)(St),b=(0,V.zZ)(),{usePlayContextItem:f}=(0,K.n)({uri:r,metadata:{[bt.sb.SORTING_CRITERIA]:b.getPlayerSort(E),[bt.sb.FILTERING_PREDICATE]:b.getPlayerFilter(v)}},{featureIdentifier:"show"}),{isActive:k,isPlaying:h,togglePlay:C}=f({uri:(null==i?void 0:i.uri)||""}),P=(0,n.useCallback)((()=>{d({intent:"expand-description",type:"click"})}),[d]),S=(0,ft.e)(e),w=(0,pt.s)(i,S),N=(0,n.useCallback)((()=>{null!=i&&i.uri&&(p?w():(d({targetUri:i.uri,intent:h?"play":"pause",type:"click"}),C()))}),[w,p,h,d,C,null==i?void 0:i.uri]),O=s.length>0,D=u||g&&m,x=D||O;return n.createElement("div",{className:Gt},n.createElement("div",{className:_t},x&&n.createElement(n.Fragment,null,n.createElement(c.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:Kt},o.ag.get("artist.about")),D&&n.createElement(ie.o,{maxLines:4,content:(u||"").trim(),onExpanded:P,htmlContent:g&&m?m:void 0,LinkComponent:se.Z}),O&&n.createElement(ge,{topics:s||[]})),n.createElement(dt,{showId:t,uri:r}),i&&n.createElement(Et._,{menu:n.createElement(gt.k,{uri:i.uri,showUri:r,sharingInfo:i.sharingInfo})},n.createElement(W,{label:o.ag.get("track-trailer"),className:Vt,images:i.coverArt||[],title:i.name,duration:i.duration.milliseconds,moreButton:n.createElement(I.y,{menu:n.createElement(gt.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:r})},n.createElement(A.z,null)),onClick:N,isPlaying:h,isActive:k,size:Y.LARGE,contentRating:null===(a=i.contentRating)||void 0===a?void 0:a.label}))),n.createElement("div",{className:Yt,"data-testid":"show-all-episode-list"},n.createElement(Zt,null),n.createElement(jt,{showMetadata:e,usePlayContextItem:f})),n.createElement(vt.k,{copyrights:[]}))};var Jt=a(51775);const $t=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:r,name:l,podcastType:i,publisherName:s}=e,{isXSOnly:c,isSMOnly:u}=(0,Jt.e)(),m=c||u;return n.createElement(we.gF,{backgroundColor:t},n.createElement(Ne.W,null,n.createElement(Oe.i,{text:l,dragUri:a,dragLabel:l})),n.createElement("div",{className:Xt},n.createElement(Et._,{menu:n.createElement(ct.M,{uri:a})},n.createElement(we.Oe,{loading:"eager",name:l,images:r,placeholderType:"show",shape:we.Kc.ROUNDED_CORNERS}))),n.createElement(we.sP,null,n.createElement(we.dy,{small:!0,uppercase:!0},"SHOW"===i?o.ag.get("type.show"):o.ag.get("type.podcast")),n.createElement(Et._,{menu:n.createElement(ct.M,{uri:a})},n.createElement(we.xd,{dragUri:a,dragLabel:l},n.createElement("span",{"data-testid":"show-title"},l))),n.createElement(we.dy,{large:!m,medium:m,bold:!0},s)))},ea=({metadata:e,showId:t})=>{var a;const{coverArt:r,name:l,uri:s}=e,c=(0,q.Z)((null===(a=r[0])||void 0===a?void 0:a.url)||null);return n.createElement("section",{className:Ft},n.createElement(i.$,null,o.ag.get("podcasts.show.seo.title",{name:l})),n.createElement($t,{metadata:e,backgroundColor:c}),n.createElement(ut,{uri:s,name:l,backgroundColor:c}),n.createElement(Qt,{metadata:e,showId:t}))},ta=n.memo((()=>{const{showId:e}=(0,r.UO)(),t=`spotify:show:${e}`,a=(0,l.W6)(et.uB),i=(0,tt.l)(t,a);return i?(0,Z.l6)(i)?n.createElement(n.Suspense,{fallback:null},n.createElement($e,{metadata:i})):n.createElement(n.Suspense,{fallback:null},n.createElement(wt,{uri:i.uri},n.createElement(Ot,{uri:i.uri,defaultSortParam:st(i.consumptionOrder)},n.createElement(ea,{showId:e,metadata:i})))):n.createElement(s.h,{hasError:!1,errorMessage:o.ag.get("error.not_found.title.podcast")})}))},94233:(e,t,a)=>{a.d(t,{k:()=>o});var n=a(67294),r=a(28760);const l="rTMkDBDp47Eo12ZEQv4U",o=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let l;return l="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,n.createElement(r.Dy,{as:"p",variant:"finale",key:t,dir:"auto"},`${l} ${a}`)}));return t&&a.unshift(n.createElement(r.Dy,{as:"p",variant:"finale",key:a.length,dir:"auto"},t)),n.createElement("div",{className:l},a)}},14535:(e,t,a)=>{a.d(t,{e:()=>u});var n=a(67294),r=a(20657),l=a(94184),o=a.n(l);const i="aAr9nYtPsG7P2LRzciXc",s="fBTYgGyvIbHizHIj7AAX",c="oUzIIkcyBdRs7hrwbwIo",u=n.memo((({isFollowing:e,onClick:t,disabled:a=!1,buttonText:l})=>{const u=e?r.ag.get("following"):r.ag.get("follow");return n.createElement("button",{type:"button",className:o()(i,{[s]:e,[c]:a}),onClick:t},l||u)}))}}]);
//# sourceMappingURL=xpui-routes-show.js.map